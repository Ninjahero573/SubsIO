/* bento.css — bento card, tiles, playlists panel, tile visuals */
.bento-grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-auto-rows: 200px; gap: 16px; padding: 10px 4px 0; margin: 14px 0; width: 100%; max-width: none; min-width: 0; height: auto; overflow: visible; background: transparent; border: none; border-radius: 0; box-shadow: none; }

.bento-card { background: var(--bg-card); border: 1px solid var(--border-color); border-radius: 16px; box-shadow: 0 14px 30px rgba(15, 23, 42, 0.55); padding: 12px; margin: 14px 0; }

.bento-card .youtube-panel, .bento-card .spotify-panel {
	/* Use a 2-column grid so the two columns share the same row height
	   which makes an empty panel expand to match its sibling. */
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: 16px;
	margin-top: 0;
	padding-top: 12px;
	padding-bottom: 12px;
	align-items: stretch;
}

/* Each column (playlists list / items list) should size like a single bento tile */
.bento-card .youtube-panel .yt-column, .bento-card .spotify-panel .yt-column {
	/* Column container: stack header + panels vertically and fill available row height */
	display: flex;
	flex-direction: column;
	gap: 12px;
	height: 100%;
	min-height: 0;
}

.bento-card #youtube-playlists-panel { background: transparent; border: none; padding: 0; box-shadow: none; }
.bento-card #spotify-playlists-panel { background: transparent; border: none; padding: 0; box-shadow: none; }

.bento-card .yt-playlists, .bento-card .yt-playlist-items,
.bento-card .sp-playlists, .bento-card .sp-playlist-tracks {
	background: var(--bg-input);
	border: 1px solid var(--border-color);
	border-radius: 14px;
	padding: 10px;
	/* Use the JS-provided CSS var to cap height relative to width.
	   Default to a sensible cap if the var isn't set (prevents unlimited growth).
	   Allow scrolling inside when content exceeds the cap. */
	max-height: var(--box-max-h, 500px);
	overflow-y: auto;
	display: grid; /* all containers use grid layout */
	grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
	grid-auto-flow: row;
	gap: 8px;
	grid-auto-rows: auto;
}
/* Ensure playlists and items boxes within each column share height */
.bento-card .youtube-panel .yt-column > .yt-playlists,
.bento-card .youtube-panel .yt-column > .yt-playlist-items,
.bento-card .spotify-panel .yt-column > .sp-playlists,
.bento-card .spotify-panel .yt-column > .sp-playlist-tracks {
	flex: 1 1 auto;
}

.bento-card .yt-playlists, .bento-card .sp-playlists { 
	display: grid; 
	grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); 
	gap: 8px; 
	align-items: start; 
}

/* Ensure playlist-items panels stretch and center their empty-state; layout for grid set in media query below */
.bento-card .yt-playlist-items, .bento-card .sp-playlist-tracks {
    display: grid !important; /* use grid for items layout; media query refines column widths */
    grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
    grid-auto-flow: row;
    gap: 8px;
    grid-auto-rows: auto;
    flex: 1 1 auto;
    min-height: 0;
}

.bento-card .yt-playlist-items .empty-state,
.bento-card .sp-playlist-tracks .empty-state {
	display: flex;
	align-items: center;
	justify-content: center;
	flex: 1 1 auto;
	padding: 12px;
}

/* Desktop: cap the playlist boxes' height to their width using a CSS variable set from JS.
   This allows the box to shrink to fit content when there isn't much, but prevents it
   from growing taller than its width when there is lots of content. The JS sets
   `--box-max-h` to the element's computed width (in px). */
/* Desktop: show playlist-items as a responsive grid; at smaller widths the JS will
   set a smaller --box-max-h multiplier so boxes aren't forced too tall. */
@media (min-width: 600px) {
	.bento-card .yt-playlist-items, .bento-card .sp-playlist-tracks {
		display: grid !important;
		grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
		grid-auto-flow: row;
		gap: 8px;
		padding: 10px;
		grid-auto-rows: auto; /* ensure rows don't stretch or overlap */
	}
}

/* On very small screens, don't apply the width-based cap — keep inner scrolling for usability */
@media (max-width: 599px) {
	.bento-card .yt-playlists, .bento-card .yt-playlist-items,
	.bento-card .sp-playlists, .bento-card .sp-playlist-tracks {
		max-height: 300px;
		overflow-y: auto;
	}
}

.yt-playlist { display: block; }
.yt-playlist-btn { display: flex; flex-direction: column; align-items: center; gap: 8px; width: 100%; padding: 6px; background: transparent; border: none; cursor: pointer; color: var(--text-primary); text-align: center; }
.yt-playlist-art { width: 100%; height: 110px; object-fit: cover; border-radius: 8px; display: block; }
.yt-playlist-art.placeholder { background: rgba(255,255,255,0.03); width: 100%; height: 110px; border-radius: 8px; }
.yt-playlist-title { font-weight: 700; font-size: 0.95rem; color: var(--text-primary); line-height: 1.1; }
.yt-playlist-btn:focus { outline: none; box-shadow: 0 8px 24px rgba(2,6,23,0.45); transform: translateY(-4px); }

/* YouTube panel: use YouTube-red glow on hover/focus for artwork buttons */
.bento-card .youtube-panel .yt-playlist-btn:hover,
.bento-card .youtube-panel .yt-playlist-btn:focus {
	outline: none;
	box-shadow: 0 10px 28px rgba(255,0,0,0.26);
	transform: translateY(-4px);
}

/* Spotify panel: use Spotify-green glow on hover/focus for artwork buttons */
.bento-card .spotify-panel .yt-playlist-btn:hover,
.bento-card .spotify-panel .yt-playlist-btn:focus {
	outline: none;
	box-shadow: 0 10px 28px rgba(29,185,84,0.28);
	transform: translateY(-4px);
}

.bento-item { background: var(--bg-input); border: none; border-radius: 14px; padding: 18px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 12px; cursor: pointer; transition: transform 0.12s ease, box-shadow 0.12s ease; color: var(--text-primary); min-height: 0; height: 100%; }
.bento-item:focus, .bento-item:hover { transform: translateY(-4px); box-shadow: 0 10px 30px rgba(2,6,23,0.5); }
.bento-icon { width: 56px; height: 56px; color: var(--primary-color); }
.bento-label { font-size: 1.08rem; font-weight: 800; text-align: center; color: var(--text-primary); line-height: 1.05; }
.bento-item .youtube-logo { width: 100px; height: 100px; }

.bento-item.youtube-login-btn { 
    background: transparent; 
    border: none; 
    color: #fff; 
    position: relative; 
    padding: 0px; 
    overflow: hidden; 
    border-radius: 12px; 
    width: 100%;
    height: 100%;
    display: flex;
    align-items: stretch;
    justify-content: stretch;
}
.bento-item.spotify-link,
.bento-item.spotify-login-btn { 
    background: #1DB954; 
    border: none; 
    color: #fff; 
    position: relative; 
    padding: 0px; 
    overflow: hidden; 
    border-radius: 12px; 
    width: 100%;
    height: 100%;
    display: flex;
    align-items: stretch;
    justify-content: stretch;
}
.bento-item.spotify-link .spotify-logo, .bento-item.spotify-link .bento-icon,
.bento-item.spotify-login-btn .spotify-logo, .bento-item.spotify-login-btn .bento-icon { width: 40px; height: 40px; display: block; }
.bento-item.spotify-link .spotify-img, .bento-item.spotify-link img.spotify-img,
.bento-item.spotify-login-btn .spotify-img, .bento-item.spotify-login-btn img.spotify-img { 
    width: 100%; 
    height: 100%; 
    object-fit: cover; 
    display: block; 
    border-radius: inherit;
    flex: 1 1 auto;
}
.bento-item.youtube-login-btn .youtube-img, .bento-item.youtube-login-btn img.youtube-img { 
    width: 100%; 
    height: 100%; 
    object-fit: cover; 
    display: block; 
    border-radius: inherit;
    flex: 1 1 auto;
}
.bento-item.spotify-link .spotify-logo, .bento-item.spotify-login-btn .spotify-logo { display: block; width: 44px; height: 44px; }
.bento-item.spotify-link .spotify-logo path, .bento-item.spotify-login-btn .spotify-logo path { fill: none; stroke: #ffffff; stroke-width: 1.6; stroke-linecap: round; stroke-linejoin: round; vector-effect: non-scaling-stroke; shape-rendering: geometricPrecision; }

/* Games button styling */
.bento-item.bento-games { 
    background: linear-gradient(135deg, #6366f1 0%, #9f5cf6 100%);
    text-decoration: none;
    color: #ffffff;
    position: relative;
    overflow: hidden;
    transition: all 200ms ease;
}

.bento-item.bento-games:hover,
.bento-item.bento-games:focus {
    background: linear-gradient(135deg, #7c7ffa 0%, #af6dff 100%);
    box-shadow: 0 12px 36px rgba(99, 102, 241, 0.25);
}

.bento-games .games-emoji {
    font-size: 2.5rem;
    display: block;
}

/* Search button subtle hover effect */
#bento-search {
    transition: all 200ms ease;
}

#bento-search:hover,
#bento-search:focus {
    background: var(--bg-input);
    border-color: var(--primary-color);
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.15);
}

/* YouTube button subtle hover effect */
.bento-item.youtube-login-btn {
    transition: all 200ms ease;
}

.bento-item.youtube-login-btn:hover,
.bento-item.youtube-login-btn:focus {
    box-shadow: 0 10px 32px rgba(255, 0, 0, 0.2);
    filter: brightness(1.1);
}

/* Spotify button subtle hover effect */
.bento-item.spotify-login-btn {
    transition: all 200ms ease;
}

.bento-item.spotify-login-btn:hover,
.bento-item.spotify-login-btn:focus {
    box-shadow: 0 10px 32px rgba(29, 185, 84, 0.25);
    filter: brightness(1.1);
}

.bento-item.spotify-link:focus, .bento-item.spotify-login-btn:focus { outline: none; box-shadow: 0 8px 24px rgba(29,185,84,0.18); }
.bento-item.youtube-login-btn::before { display: none !important; }
.bento-item.youtube-login-btn:focus { outline: none; box-shadow: 0 8px 24px rgba(0,0,0,0.12); }
#youtube-login-btn.signed-in .youtube-logo { filter: drop-shadow(0 6px 14px rgba(16,185,129,0.12)); }

.header-controls .primary-btn { padding: 10px 14px; border-radius: 10px; font-size: 0.95em; }

/* Small adjustments: keep bento-card grid spacing balanced inside the card */
.bento-card .bento-grid { margin-top: 0; margin-bottom: 12px; padding-bottom: 0; border-bottom: none; }
.bento-card .youtube-panel { margin-top: 0; }
.bento-card .youtube-panel h3 {
	text-align: center;
	/* hide the visible text but remove default heading margins so it doesn't add extra space */
	color: transparent;
	text-shadow: none;
	pointer-events: none;
	user-select: none;
	margin: 0;
	padding: 0;
	height: 0;
	line-height: 0;
	overflow: hidden;
}
.bento-card .spotify-panel h3 {
	text-align: center;
	color: transparent;
	text-shadow: none;
	pointer-events: none;
	user-select: none;
	margin: 0;
	padding: 0;
	height: 0;
	line-height: 0;
	overflow: hidden;
}
.bento-card #youtube-playlists-panel { padding-left: 4px !important; padding-right: 4px !important; }
@media (max-width: 899px) { .bento-card #youtube-playlists-panel { padding-left: 0 !important; padding-right: 0 !important; } }

/* Mobile adjustments: 2x2 bento grid and stacked YouTube panel */
@media (max-width: 600px) {
    .bento-grid { grid-template-columns: repeat(2, 1fr); }
	/* shrink row height to avoid oversized login buttons */
	.bento-grid { grid-auto-rows: 150px; }
	/* ensure logo/login tile remains square but not overly tall */
	.bento-item.spotify-login-btn, .bento-item.youtube-login-btn { padding: 0; }
	.bento-item.spotify-login-btn img.spotify-img, .bento-item.youtube-login-btn img.youtube-img { object-fit: cover; }
	/* On mobile stack one per row for readability */
	.bento-card .youtube-panel .yt-column, .bento-card .spotify-panel .yt-column {
		grid-column: 1 / -1;
		width: 100%;
	}
	/* On small screens, cap height and allow inner scrolling to keep UI usable */
	.bento-card .yt-playlists, .bento-card .yt-playlist-items,
	.bento-card .sp-playlists, .bento-card .sp-playlist-tracks {
		max-height: 300px;
		overflow-y: auto;
	}
}

/* Themed scrollbars for inner scrollable panels (WebKit & Firefox) */
.bento-card .yt-playlists, .bento-card .yt-playlist-items,
.bento-card .sp-playlists, .bento-card .sp-playlist-tracks,
.search-results, #np-queue-list, .presence-list {
	/* Firefox */
	scrollbar-width: thin;
	scrollbar-color: var(--primary-color) rgba(255,255,255,0.03);
}

/* WebKit-based browsers */
.bento-card .yt-playlists::-webkit-scrollbar, .bento-card .yt-playlist-items::-webkit-scrollbar,
.bento-card .sp-playlists::-webkit-scrollbar, .bento-card .sp-playlist-tracks::-webkit-scrollbar,
.search-results::-webkit-scrollbar, #np-queue-list::-webkit-scrollbar, .presence-list::-webkit-scrollbar {
	width: 10px;
	height: 10px;
}
.bento-card .yt-playlists::-webkit-scrollbar-track, .bento-card .yt-playlist-items::-webkit-scrollbar-track,
.bento-card .sp-playlists::-webkit-scrollbar-track, .bento-card .sp-playlist-tracks::-webkit-scrollbar-track,
.search-results::-webkit-scrollbar-track, #np-queue-list::-webkit-scrollbar-track, .presence-list::-webkit-scrollbar-track {
	background: transparent;
}
.bento-card .yt-playlists::-webkit-scrollbar-thumb, .bento-card .yt-playlist-items::-webkit-scrollbar-thumb,
.bento-card .sp-playlists::-webkit-scrollbar-thumb, .bento-card .sp-playlist-tracks::-webkit-scrollbar-thumb,
.search-results::-webkit-scrollbar-thumb, #np-queue-list::-webkit-scrollbar-thumb, .presence-list::-webkit-scrollbar-thumb {
	background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
	border-radius: 999px;
	border: 2px solid rgba(0,0,0,0.12);
}
.bento-card .yt-playlists::-webkit-scrollbar-thumb:hover, .bento-card .yt-playlist-items::-webkit-scrollbar-thumb:hover,
.bento-card .sp-playlists::-webkit-scrollbar-thumb:hover, .bento-card .sp-playlist-tracks::-webkit-scrollbar-thumb:hover,
.search-results::-webkit-scrollbar-thumb:hover, #np-queue-list::-webkit-scrollbar-thumb:hover, .presence-list::-webkit-scrollbar-thumb:hover {
	filter: brightness(0.95);
}

/* Primary button comprehensive styles */
.primary-btn, button[type="submit"] { 
    width: 100%; 
    padding: 15px; 
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); 
    border: none; 
    border-radius: 10px; 
    color: white; 
    font-size: 1.1em; 
    font-weight: bold; 
    cursor: pointer; 
    transition: transform 0.2s, box-shadow 0.2s;
}
.primary-btn:hover, button[type="submit"]:hover { 
    transform: translateY(-2px); 
    box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4); 
}
.primary-btn:active, button[type="submit"]:active { 
    transform: translateY(0); 
}